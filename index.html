<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–æ—Ä–º–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        fieldset { margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        legend { font-weight: bold; padding: 0 5px; }
        button { background: #28a745; color: white; border: none; padding: 10px 15px; cursor: pointer; }
        button:hover { background: #218838; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>–í–≤–µ–¥–∏—Ç–µ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h1>
    
    <picture>
        <source srcset="media/images/img_form_for_site.webp" type="image/webp">
        <source srcset="media/images/img_form_for_site.jpg" type="image/jpeg"> 
        <img src="media/images/img_form_for_site.jpg" alt="–§–æ—Ä–º–∞" style="width:100%; max-width:800px">
    </picture>

    <form id="myForm">
        <fieldset>
            <legend>–ò–º—è</legend>
            <label for="login">–ò–º—è:</label>
            <input id="login" name="name" type="text" required>
        </fieldset>

        <fieldset>
            <legend>–§–∞–º–∏–ª–∏—è</legend>
            <label for="family">–§–∞–º–∏–ª–∏—è:</label>
            <input id="family" name="surname" type="text" required>
        </fieldset>

        <fieldset>
            <legend>–í–æ–∑—Ä–∞—Å—Ç</legend>
            <label for="age">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
            <input id="age" name="birthdate" type="date" required>
        </fieldset>

        <fieldset>
            <legend>–ì–æ—Ä–æ–¥</legend>
            <label for="city">–í–∞—à –≥–æ—Ä–æ–¥:</label>
            <select name="city" id="city">
                <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option>
                <option value="–¢—É–ª–∞" selected>–¢—É–ª–∞</option>
                <option value="other">–¥—Ä—É–≥–æ–µ</option>
            </select>
        </fieldset>

        <fieldset id="otherCityField" class="hidden">
            <legend><q>–ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ –¥—Ä—É–≥–æ–µ</q> –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –≥–æ—Ä–æ–¥</legend>
            <textarea name="custom_city" id="other-city"></textarea>
        </fieldset>

        <fieldset>
            <legend>–í–∞—à –ø–æ–ª</legend>
            <p>
                <input id="male" name="gender" type="radio" value="–ú—É–∂—Å–∫–æ–π" checked>
                <label for="male">–ú—É–∂—Å–∫–æ–π</label>
            </p>
            <p>
                <input id="female" name="gender" type="radio" value="–ñ–µ–Ω—Å–∫–∏–π">
                <label for="female">–ñ–µ–Ω—Å–∫–∏–π</label>
            </p>
        </fieldset>

        <fieldset>
            <legend>–ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</legend>
            <label for="data">–°–µ—Ä–∏—è/–Ω–æ–º–µ—Ä:</label>
            <input id="data" name="passport" type="text" required>
        </fieldset>

        <fieldset>
            <legend>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</legend>
            <label for="email">–ü–æ—á—Ç–∞:</label>
            <input id="email" name="email" type="email" required>
        </fieldset>

        <fieldset>
            <legend>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</legend>
            <textarea name="comment"></textarea>
        </fieldset>

        <fieldset>
            <input id="confirm" name="agreement" type="checkbox" required>
            <label for="confirm">–Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å–æ –≤—Å–µ–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏</label>
            <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
        </fieldset>
    </form>

    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "–¥—Ä—É–≥–æ–µ"
        document.getElementById('city').addEventListener('change', function() {
            const otherCityField = document.getElementById('otherCityField');
            otherCityField.classList.toggle('hidden', this.value !== 'other');
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('myForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
            let message = `üìå <b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞:</b>\n\n`;
            
            // –†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π
            const fieldLabels = {
                name: '–ò–º—è',
                surname: '–§–∞–º–∏–ª–∏—è', 
                birthdate: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è',
                city: '–ì–æ—Ä–æ–¥',
                custom_city: '–£–∫–∞–∑–∞–Ω–Ω—ã–π –≥–æ—Ä–æ–¥',
                gender: '–ü–æ–ª',
                passport: '–ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ',
                email: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞',
                comment: '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π',
                agreement: '–°–æ–≥–ª–∞—Å–∏–µ –ø–æ–ª—É—á–µ–Ω–æ'
            };
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
            if (data.city === 'other' && data.custom_city) {
                message += `<b>–ì–æ—Ä–æ–¥:</b> ${data.custom_city}\n`;
            } else {
                message += `<b>–ì–æ—Ä–æ–¥:</b> ${data.city}\n`;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
            const fieldsToShow = ['name', 'surname', 'birthdate', 'gender', 'passport', 'email', 'comment'];
            fieldsToShow.forEach(field => {
                if (data[field]) {
                    message += `<b>${fieldLabels[field]}:</b> ${data[field]}\n`;
                }
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–≥–ª–∞—Å–∏–µ
            message += `<b>${fieldLabels.agreement}:</b> ${data.agreement ? '–î–∞' : '–ù–µ—Ç'}`;

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram (–ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ò –î–ê–ù–ù–´–ï!)
            const botToken = '8436213222:AAG52yLXd-oPa124kDHCIgf2Tbh-sKsVFd4';
            const chatId = '6003377664';
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message,
                        parse_mode: 'HTML'
                    }),
                });

                const result = await response.json();
                
                if (result.ok) {
                    alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!');
                    e.target.reset();
                    document.getElementById('otherCityField').classList.add('hidden');
                } else {
                    alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + (result.description || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                }
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
                console.error(error);
            }
        });
    </script>
</body>
</html>
